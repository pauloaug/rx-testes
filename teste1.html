<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>teste com Rx</title>

	<script type="text/javascript" src="d3.min.js"></script>
	<script type="text/javascript" src="Rx.min.js"></script>

</head>

<body>

	<div>
		<svg width=800 height=600>

		</svg>

	</div>



<script>
	
	var intervalo = Rx.Observable.interval(10);

	var mouse = Rx.Observable.fromEvent(document, 'mousemove');

	var foo = Rx.Observable.of(1,2,3);
	
	foo.subscribe(console.log);

	var bar = foo.map(x=>{
		var c = d3.select("svg")
			.append("circle")
			.attr("cx", 50 * x)
			.attr("cy", 50)
			// .attr("r", 20)
			.attr("r", 20)
			.attr("stroke-width", "2")
			.attr("stroke", "black")
			.attr("fill", "transparent");

		intervalo
			.filter( x=> x<500 )
			.subscribe(d=>{
			c
			  // .attr("r", function(e){return d})
			  .attr("transform", function(e){
				// return `scale(${1 + d/100})`
				return `translate(${d},${d})`
			  });
		});

		return c.node();
	});


	bar.subscribe(console.log);

	// bar.delay(100).map(x=> {
	// 	x.attr("transform", "translate(30)");
	// }).subscribe(console.log);


</script>


</body>
</html>